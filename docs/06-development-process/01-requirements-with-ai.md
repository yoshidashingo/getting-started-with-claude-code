# AIと要件定義

Claude Codeを活用した要件定義プロセスについて説明します。AIとの対話による要件整理の実践的な手法を学習できます。

## AIを活用した要件定義とは

従来の要件定義では、ステークホルダーとの会議や文書レビューを通じて要件を収集・整理していました。AI活用要件定義では、Claude Codeとの対話を通じて要件の抽出、整理、検証を効率的に行います。

### 従来手法との比較

| 項目 | 従来手法 | AI活用手法 |
|------|----------|------------|
| 要件抽出 | 会議・ヒアリング中心 | AI対話による構造化抽出 |
| 要件整理 | 手動での分類・優先順位付け | AI支援による自動分類 |
| 要件検証 | レビュー会議 | AI分析による矛盾・漏れ検出 |
| ドキュメント作成 | 手動作成 | AI生成による効率化 |
| 更新管理 | 手動追跡 | AI支援による変更影響分析 |

## 要件定義プロセス

### フェーズ1: 初期要件の抽出

#### ステップ1: プロジェクト概要の整理

**プロンプト例:**
```
新しいWebアプリケーションプロジェクトの要件定義を支援してください。

プロジェクト概要:
- 目的: 社内のタスク管理効率化
- 対象ユーザー: 社員50名
- 予算: 500万円
- 期間: 6ヶ月

以下の観点で要件を整理したいです:
1. 機能要件
2. 非機能要件
3. 制約条件
4. 前提条件

まず、どのような情報を追加で収集すべきか教えてください。
```

**Claude Codeからの回答例:**
```
プロジェクト要件定義のために、以下の情報を追加で収集することをお勧めします：

## 機能要件の詳細化
1. **現在の課題**
   - 既存のタスク管理方法とその問題点
   - 解決したい具体的な課題

2. **主要機能**
   - タスクの作成・編集・削除
   - 進捗管理・ステータス更新
   - チーム間でのタスク共有
   - 通知・リマインダー機能
   - レポート・分析機能

3. **ユーザー種別**
   - 一般社員の権限と機能
   - 管理者の権限と機能
   - 部門長の権限と機能

## 非機能要件
1. **パフォーマンス**
   - 同時接続ユーザー数
   - レスポンス時間の要求
   - データ量の想定

2. **セキュリティ**
   - 認証方式（SSO連携の有無）
   - データの機密性レベル
   - アクセス制御の要求

3. **可用性**
   - 稼働時間の要求（24/7？営業時間のみ？）
   - 障害時の復旧時間目標

## 制約条件
1. **技術制約**
   - 既存システムとの連携要求
   - 使用可能な技術スタック
   - インフラ環境の制限

2. **組織制約**
   - 承認プロセス
   - セキュリティポリシー
   - 運用体制

これらの情報を段階的に収集していきましょう。
まず、現在の課題と解決したい問題から詳しく聞かせてください。
```

#### ステップ2: 詳細要件の抽出

**プロンプト例:**
```
現在の課題について詳しく説明します：

現在の問題:
- Excelでタスク管理しているが、複数人での同時編集が困難
- 進捗の可視化ができていない
- 締切の管理が属人的
- 部門間でのタスク共有ができていない

解決したい課題:
- リアルタイムでの情報共有
- 進捗の見える化
- 自動的な締切通知
- 部門横断的なプロジェクト管理

この情報を基に、具体的な機能要件を整理してください。
```

**Claude Codeの整理例:**
```
現在の課題分析に基づいて、以下の機能要件を整理しました：

## 主要機能要件

### 1. タスク管理機能
**要件ID: REQ-001**
- **概要**: 個人・チームのタスクを一元管理
- **詳細**:
  - タスクの作成・編集・削除
  - 優先度設定（高・中・低）
  - 締切日設定
  - 担当者アサイン
  - 進捗ステータス管理（未着手・進行中・完了・保留）

### 2. リアルタイム共有機能
**要件ID: REQ-002**
- **概要**: 複数ユーザーでの同時編集・閲覧
- **詳細**:
  - リアルタイム更新
  - 編集競合の回避
  - 変更履歴の記録
  - コメント・メンション機能

### 3. 進捗可視化機能
**要件ID: REQ-003**
- **概要**: プロジェクト・タスクの進捗を視覚的に表示
- **詳細**:
  - ガントチャート表示
  - カンバンボード表示
  - 進捗率の自動計算
  - ダッシュボード機能

### 4. 通知・アラート機能
**要件ID: REQ-004**
- **概要**: 締切や重要な更新の自動通知
- **詳細**:
  - 締切前のリマインダー
  - タスク更新通知
  - メール・システム内通知
  - 通知設定のカスタマイズ

### 5. 部門横断管理機能
**要件ID: REQ-005**
- **概要**: 部門を跨いだプロジェクト管理
- **詳細**:
  - 部門別・プロジェクト別の表示切替
  - 権限管理（閲覧・編集・管理）
  - 部門間でのタスク移譲
  - 横断的なレポート生成

次に、これらの機能の優先順位と詳細な仕様を決めていきましょう。
最も重要な機能はどれでしょうか？
```

### フェーズ2: 要件の構造化と優先順位付け

#### ステップ3: 要件の分類と優先順位付け

**プロンプト例:**
```
整理された機能要件について、以下の観点で優先順位を付けてください：

評価基準:
- ビジネス価値（高・中・低）
- 実装難易度（高・中・低）
- ユーザー影響度（高・中・低）
- 緊急度（高・中・低）

また、MVP（Minimum Viable Product）として
最初にリリースすべき機能を特定してください。
```

**Claude Codeの分析例:**
```
## 要件優先順位分析

### 優先度マトリクス

| 要件ID | 機能名 | ビジネス価値 | 実装難易度 | ユーザー影響度 | 緊急度 | 総合優先度 |
|--------|--------|--------------|------------|----------------|--------|------------|
| REQ-001 | タスク管理 | 高 | 中 | 高 | 高 | **最高** |
| REQ-002 | リアルタイム共有 | 高 | 高 | 高 | 高 | **高** |
| REQ-003 | 進捗可視化 | 中 | 中 | 中 | 中 | **中** |
| REQ-004 | 通知・アラート | 中 | 低 | 高 | 中 | **中** |
| REQ-005 | 部門横断管理 | 高 | 高 | 中 | 低 | **低** |

### MVP機能の特定

**フェーズ1（MVP）: 基本タスク管理**
- REQ-001: タスク管理機能（基本CRUD）
- REQ-004: 通知・アラート機能（基本通知のみ）

**フェーズ2: 協働機能**
- REQ-002: リアルタイム共有機能
- REQ-003: 進捗可視化機能（基本表示）

**フェーズ3: 高度な管理機能**
- REQ-005: 部門横断管理機能
- REQ-003: 進捗可視化機能（高度な分析）

### 推奨実装順序

1. **基本タスク管理** (2ヶ月)
   - ユーザー認証
   - タスクCRUD
   - 基本的な通知

2. **協働機能** (2ヶ月)
   - リアルタイム更新
   - コメント機能
   - 基本的な進捗表示

3. **管理・分析機能** (2ヶ月)
   - 高度な権限管理
   - 詳細な分析・レポート
   - 部門横断機能

この順序で進めることで、早期にユーザー価値を提供しながら、
段階的に機能を拡張できます。
```

### フェーズ3: 非機能要件の定義

#### ステップ4: 非機能要件の詳細化

**プロンプト例:**
```
以下の非機能要件について、具体的な数値目標と
測定方法を含めて詳細化してください：

環境情報:
- ユーザー数: 50名（同時接続最大20名想定）
- データ量: タスク数月間1000件程度
- 利用時間: 平日9:00-18:00がメイン
- アクセス元: 社内ネットワーク + リモートワーク

要求事項:
- レスポンス性能
- 可用性
- セキュリティ
- 拡張性
- 保守性
```

**Claude Codeの詳細化例:**
```
## 非機能要件詳細仕様

### 1. パフォーマンス要件

**要件ID: NFR-001 レスポンス性能**
- **目標値**:
  - ページ読み込み: 3秒以内（95%ile）
  - API応答時間: 1秒以内（95%ile）
  - タスク作成・更新: 2秒以内（95%ile）
- **測定方法**:
  - APMツール（New Relic等）による監視
  - 定期的な負荷テスト実施
- **許容値**:
  - 最大応答時間: 10秒（99%ile）

**要件ID: NFR-002 スループット**
- **目標値**:
  - 同時接続ユーザー: 20名
  - 1秒あたりのリクエスト処理: 100req/sec
- **測定方法**:
  - 負荷テストツール（JMeter等）
  - 本番環境での監視

### 2. 可用性要件

**要件ID: NFR-003 稼働率**
- **目標値**:
  - 稼働率: 99.5%（営業時間内）
  - 計画停止: 月1回、2時間以内
- **測定方法**:
  - 監視ツールによる死活監視
  - SLA報告書の作成
- **障害対応**:
  - 障害検知: 5分以内
  - 復旧時間: 2時間以内（RTO）

### 3. セキュリティ要件

**要件ID: NFR-004 認証・認可**
- **要求事項**:
  - 既存AD（Active Directory）との連携
  - セッション管理（タイムアウト: 8時間）
  - 役割ベースアクセス制御（RBAC）
- **測定方法**:
  - セキュリティ監査の実施
  - 脆弱性スキャンの定期実行

**要件ID: NFR-005 データ保護**
- **要求事項**:
  - 通信暗号化（TLS 1.3以上）
  - データベース暗号化
  - 個人情報の匿名化
- **測定方法**:
  - セキュリティテストの実施
  - コンプライアンス監査

### 4. 拡張性要件

**要件ID: NFR-006 スケーラビリティ**
- **目標値**:
  - ユーザー数: 100名まで拡張可能
  - データ量: 10万件まで対応
- **アーキテクチャ**:
  - 水平スケーリング対応
  - マイクロサービス化の検討
- **測定方法**:
  - 段階的な負荷テスト
  - パフォーマンス監視

### 5. 保守性要件

**要件ID: NFR-007 運用・保守**
- **要求事項**:
  - ログ管理（保存期間: 1年）
  - バックアップ（日次、保存期間: 3ヶ月）
  - 監視・アラート機能
- **測定方法**:
  - 運用手順書の整備
  - 障害対応時間の測定

### 6. ユーザビリティ要件

**要件ID: NFR-008 使いやすさ**
- **目標値**:
  - 新規ユーザーの習得時間: 30分以内
  - タスク作成操作: 3クリック以内
- **測定方法**:
  - ユーザビリティテストの実施
  - ユーザー満足度調査

これらの非機能要件は、システムの品質を保証するために
設計・実装・テストの各フェーズで検証する必要があります。
```

### フェーズ4: 要件の検証と文書化

#### ステップ5: 要件の整合性チェック

**プロンプト例:**
```
これまでに定義した要件について、以下の観点で
整合性と完全性をチェックしてください：

1. 機能要件間の矛盾や重複
2. 機能要件と非機能要件の整合性
3. 実現可能性の評価
4. 要件の漏れや曖昧さ
5. ステークホルダーの期待との整合性

また、リスクとなりそうな要件があれば指摘してください。
```

**Claude Codeの検証例:**
```
## 要件整合性チェック結果

### ✅ 整合性が取れている項目

1. **機能要件の一貫性**
   - タスク管理とリアルタイム共有の連携が適切
   - 通知機能と進捗管理の関係が明確

2. **非機能要件の実現可能性**
   - ユーザー数50名に対するパフォーマンス要件は適切
   - セキュリティ要件と既存インフラの整合性

### ⚠️ 注意が必要な項目

1. **REQ-002 vs NFR-001の潜在的競合**
   - **問題**: リアルタイム更新機能がレスポンス性能に影響する可能性
   - **対策**: WebSocketの効率的な実装、適切なキャッシュ戦略

2. **REQ-005 vs NFR-004の複雑性**
   - **問題**: 部門横断管理の権限制御が複雑になる可能性
   - **対策**: シンプルな権限モデルから開始、段階的に拡張

### ❌ 要件の漏れ・曖昧さ

1. **データ移行要件の不足**
   - **問題**: 既存Excelデータの移行方法が未定義
   - **追加要件**: REQ-006 データ移行機能

2. **バックアップ・復旧要件の詳細不足**
   - **問題**: 災害時の復旧手順が不明確
   - **追加要件**: NFR-009 災害復旧要件

3. **モバイル対応の要件不足**
   - **問題**: スマートフォンからのアクセス要件が未定義
   - **確認事項**: モバイル対応の必要性

### 🚨 高リスク要件

1. **REQ-002 リアルタイム共有機能**
   - **リスク**: 技術的複雑性が高い
   - **影響**: 開発期間の延長、品質リスク
   - **軽減策**: プロトタイプでの技術検証

2. **NFR-004 AD連携**
   - **リスク**: 既存システムとの連携障害
   - **影響**: セキュリティ要件の未達成
   - **軽減策**: 早期の技術調査と検証

### 推奨アクション

1. **即座に対応すべき項目**
   - データ移行要件の詳細化
   - モバイル対応要件の確認
   - AD連携の技術調査

2. **設計フェーズで検討すべき項目**
   - リアルタイム機能のアーキテクチャ設計
   - 権限管理モデルの詳細設計

3. **実装前に検証すべき項目**
   - パフォーマンス要件の実現可能性
   - セキュリティ要件の技術的検証
```

#### ステップ6: 要件仕様書の作成

**プロンプト例:**
```
これまでの要件定義内容を基に、
正式な要件仕様書を作成してください。

含めるべき内容:
- プロジェクト概要
- 機能要件一覧
- 非機能要件一覧
- 制約条件
- 前提条件
- 用語集
- 承認記録

IEEE 830標準に準拠した形式で作成してください。
```

**生成される要件仕様書の例:**
```markdown
# ソフトウェア要件仕様書
## タスク管理システム

**文書番号**: SRS-TMS-001  
**版数**: 1.0  
**作成日**: 2024-01-15  
**承認者**: [承認者名]

---

## 1. はじめに

### 1.1 目的
本文書は、社内タスク管理システムのソフトウェア要件を定義する。

### 1.2 適用範囲
本システムは社員50名を対象とした社内タスク管理の効率化を目的とする。

### 1.3 定義・略語・省略語
- **タスク**: 実行すべき作業単位
- **MVP**: Minimum Viable Product
- **SLA**: Service Level Agreement

### 1.4 参考文献
- IEEE Std 830-1998
- 社内システム開発ガイドライン

---

## 2. 全体的な記述

### 2.1 製品の概要
既存のExcelベースのタスク管理を置き換える、
Webベースのタスク管理システムを開発する。

### 2.2 製品の機能
- タスクの作成・編集・削除
- リアルタイムでの情報共有
- 進捗の可視化
- 自動通知機能
- 部門横断的な管理

### 2.3 ユーザーの特性
- **一般社員**: 日常的なタスク管理
- **管理者**: チーム・部門の管理
- **システム管理者**: システムの運用・保守

### 2.4 制約
- 既存AD（Active Directory）との連携必須
- 社内セキュリティポリシーの遵守
- 予算上限: 500万円

---

## 3. 機能要件

### 3.1 タスク管理機能 (REQ-001)
**優先度**: 最高

#### 3.1.1 概要
ユーザーがタスクを作成、編集、削除できる機能を提供する。

#### 3.1.2 詳細仕様
- タスクの基本情報（タイトル、説明、締切、担当者、優先度）
- ステータス管理（未着手、進行中、完了、保留）
- タスクの検索・フィルタリング機能

#### 3.1.3 入力
- タスク情報（必須項目: タイトル、締切）
- ユーザー操作（作成、更新、削除）

#### 3.1.4 出力
- タスク一覧表示
- 操作結果の通知

#### 3.1.5 処理
1. 入力値の検証
2. データベースへの保存
3. 関連ユーザーへの通知

### 3.2 リアルタイム共有機能 (REQ-002)
**優先度**: 高

[詳細仕様を続ける...]

---

## 4. 非機能要件

### 4.1 パフォーマンス要件
- ページ読み込み時間: 3秒以内（95%ile）
- API応答時間: 1秒以内（95%ile）
- 同時接続ユーザー: 20名

### 4.2 可用性要件
- 稼働率: 99.5%（営業時間内）
- 復旧時間: 2時間以内

[続く...]

---

## 5. その他の要件

### 5.1 インターフェース要件
- 既存AD（Active Directory）との連携
- メール通知システムとの連携

### 5.2 ライセンス要件
- オープンソースライブラリの使用許可
- 商用ライセンスの予算内での調達

---

## 6. 付録

### 6.1 用語集
[用語の定義]

### 6.2 変更履歴
| 版数 | 日付 | 変更内容 | 変更者 |
|------|------|----------|--------|
| 1.0 | 2024-01-15 | 初版作成 | [作成者] |

---

**承認記録**
- プロジェクトマネージャー: [署名] [日付]
- システム責任者: [署名] [日付]
- ユーザー代表: [署名] [日付]
```

## 要件管理のベストプラクティス

### 1. 要件の追跡可能性

**プロンプト例:**
```
要件の追跡可能性を確保するために、
要件IDと設計・実装・テストの関連付けを
管理する仕組みを提案してください。
```

### 2. 要件変更管理

**プロンプト例:**
```
プロジェクト進行中の要件変更を
効率的に管理するプロセスを設計してください。

考慮事項:
- 変更の影響分析
- ステークホルダーの承認プロセス
- 開発チームへの影響最小化
```

### 3. 要件の検証・妥当性確認

**プロンプト例:**
```
定義した要件が実際にビジネス価値を
提供するかを検証する方法を教えてください。

検証したい項目:
- ユーザーの真のニーズとの整合性
- 技術的実現可能性
- ROI（投資対効果）
```

## 次のステップ

要件定義を完了したら：

1. **[AIと設計](02-design-with-ai.md)** - 要件を基にした設計プロセス
2. **[設計原則管理](03-design-principles.md)** - 設計品質の基盤作り
3. **[単体テスト](06-unit-testing.md)** - 要件を満たすテストの作成

---

**関連ドキュメント:**
- [体系的な開発プロセス](README.md) - 全体的な開発フロー
- [AIと設計](02-design-with-ai.md) - 次のフェーズ
- [プロジェクトコンテキスト](../02-features/project-context.md) - 大規模プロジェクトでの要件管理